Create Databases Tugas_Akhir;
USE Tugas_Akhir;

create table companies (
    company_id int primary key,
    company_name varchar(255) not null,
    industry varchar(100),
    company_size varchar(50),
    location varchar(255)
);

create table skills (
    skill_id int primary key,
    skill_name varchar(100) not null unique
);

create table tools (
    tool_id int primary key,
    tool_name varchar(100) not null unique
);

create table jobs (
    job_id int primary key,
    company_id int,
    job_title varchar(255) not null,
    experience_level varchar(50),
    employment_type varchar(50),
    salary_range_usd varchar(50),
    posted_date date,
    foreign key (company_id) references companies(company_id)
);

create table job_skills (
    job_id int,
    skill_id int,
    primary key (job_id, skill_id),
    foreign key (job_id) references jobs(job_id) on delete cascade,
    foreign key (skill_id) references skills(skill_id) on delete cascade
);

create table job_tools (
    job_id int,
    tool_id int,
    primary key (job_id, tool_id),
    foreign key (job_id) references jobs(job_id) on delete cascade,
    foreign key (tool_id) references tools(tool_id) on delete cascade
);

load data infile '/Data Set/companies.csv'
into table companies
fields terminated by ','
optionally enclosed by '"'
lines terminated by '\r\n'
ignore 1 rows;

load data infile '/Data Set/skills.csv'
into table skills
fields terminated by ','
optionally enclosed by '"'
lines terminated by '\r\n'
ignore 1 rows;

load data infile '/Data Set/tools.csv'
into table tools
fields terminated by ','
optionally enclosed by '"'
lines terminated by '\r\n'
ignore 1 rows;

load data infile '/Data Set/jobs.csv'
into table jobs
fields terminated by ','
optionally enclosed by '"'
lines terminated by '\r\n'
ignore 1 rows;

load data infile '/Data Set/job_skills.csv'
into table job_skills
fields terminated by ','
optionally enclosed by '"'
lines terminated by '\r\n'
ignore 1 rows;